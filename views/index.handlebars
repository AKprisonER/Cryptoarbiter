<div class="jumbotron text-center">
    <h1 class="display-3">...</h1>
    <p class="lead">Jot down ideas for your next YouTube videos</p>
    <a href="/ideas/add" class="btn btn-dark btn-lg">Add Video Idea</a>
</div>

<table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%" class="table table-striped table-bordered"
    style="border-collapse: collapse !important">
    <thead>
        <tr>
            <th>Code</th>
            <th>Bittrex Last</th>
        </tr>
    </thead>

</table>

<script>
    $(document).ready(function () {
        var table = $('#example').DataTable({
            "ajax": 'http://localhost:5000/tickers',
            responsive: true,
            fixedHeader: true,
            "columns": [
                {
                    "data": "id", "orderable": true,
                },
                {
                    "data": "bittrex.last", "orderable": true, render: function (data, type, row, meta) {

                        test(meta, data);
                        var settings = meta.settings;
                        var api = new $.fn.dataTable.Api(settings);
                        var value = api.cell(meta.row, meta.col);

                        var a_ndx = api.column('a:name').index();
                        return 'xx' + row[a_ndx];
                    }
                },
            ],
        });
        var prevTable;

        function test(meta, value) {

            if (prevTable !== undefined) {
                var next_data = prevTable.cell(meta.row, meta.col).data();
                if (next_data != value) {
                    console.log("diverso");
                }
            }

        }

        setInterval(function () {
            prevTable = JSON.parse(JSON.stringify(table));// Object.assign({}, table);
            table.ajax.reload(null, false); // user paging is not reset on reload
        }, 3000);
    });
</script>
<style>
</style>